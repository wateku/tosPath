//==============================================================
// Character Database
//==============================================================
var CHARACTERS_DATA = {
    NONE : {
        id           : "NONE",
        label        : "瘋頭",
        // img          : "img/Material/00/w1-1.png",
        color        : "w",
        type         : "MATERIAL",
        health       : 2600,
        attack       : 100,
        recovery     : 100,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    GREEK_W : {
        id           : "GREEK_W",
        label        : "湛藍海神．波塞頓",
        // img          : "img/Special/2/w4.png",
        color        : "w",
        type         : "GOD",
        health       : 3198,
        attack       : 1799,
        recovery     : 440,
        wake         : [ "H_A_R_INCREASE", "STRAIGHT_ATTACK", "H_A_R_INCREASE", "DROP_INCREASE" ],
        wake_var     : [ [0,90,0], [1.1,4], [340,0,0], ['w',0.4] ],
        wake_info    : [ "攻擊力+90", "4顆直排劍10%", "生命力+340", "直排水符石掉落提升至40%" ],
        leader       : "GREEK_W",
        active       : [ "TRACE_OF_NOTION_W" ],
    },
    GREEK_F : {
        id           : "GREEK_F",
        label        : "煉火之神．赫淮斯托斯",
        // img          : "img/Special/2/f4.png",
        color        : "f",
        type         : "GOD",
        health       : 3364,
        attack       : 1923,
        recovery     : 391,
        wake         : [ "H_A_R_INCREASE", "STRAIGHT_ATTACK", "H_A_R_INCREASE", "DROP_INCREASE" ],
        wake_var     : [ [0,90,0], [1.1,4], [340,0,0], ['f',0.4] ],
        wake_info    : [ "攻擊力+90", "4顆直排劍10%", "生命力+340", "直排火符石掉落提升至40%" ],
        leader       : "GREEK_F",
        active       : [ "TRACE_OF_NOTION_F" ],
    },
    GREEK_P : {
        id           : "GREEK_P",
        label        : "戰神自傲．雅典娜",
        // img          : "img/Special/2/p4.png",
        color        : "p",
        type         : "GOD",
        health       : 3697,
        attack       : 1656,
        recovery     : 412,
        wake         : [ "H_A_R_INCREASE", "STRAIGHT_ATTACK", "H_A_R_INCREASE", "DROP_INCREASE" ],
        wake_var     : [ [0,90,0], [1.1,4], [340,0,0], ['p',0.4] ],
        wake_info    : [ "攻擊力+90", "4顆直排劍10%", "生命力+340", "直排木符石掉落提升至40%" ],
        leader       : "GREEK_P",
        active       : [ "TRACE_OF_NOTION_P" ],
    },
    GREEK_L : {
        id           : "GREEK_L",
        label        : "炫目聖光．阿波羅",
        // img          : "img/Special/2/l4.png",
        color        : "l",
        type         : "GOD",
        health       : 3332,
        attack       : 1786,
        recovery     : 452,
        wake         : [ "H_A_R_INCREASE", "STRAIGHT_ATTACK", "H_A_R_INCREASE", "DROP_INCREASE" ],
        wake_var     : [ [0,90,0], [1.1,4], [340,0,0], ['l',0.4] ],
        wake_info    : [ "攻擊力+90", "4顆直排劍10%", "生命力+340", "直排光符石掉落提升至40%" ],
        leader       : "GREEK_L",
        active       : [ "TRACE_OF_NOTION_L" ],
    },
    GREEK_D : {
        id           : "GREEK_D",
        label        : "澄明月夜．阿提密斯",
        // img          : "img/Special/2/d4.png",
        color        : "d",
        type         : "GOD",
        health       : 3132,
        attack       : 1976,
        recovery     : 407,
        wake         : [ "H_A_R_INCREASE", "STRAIGHT_ATTACK", "H_A_R_INCREASE", "DROP_INCREASE" ],
        wake_var     : [ [0,90,0], [1.1,4], [340,0,0], ['d',0.4] ],
        wake_info    : [ "攻擊力+90", "4顆直排劍10%", "生命力+340", "直排暗符石掉落提升至40%" ],
        leader       : "GREEK_D",
        active       : [ "TRACE_OF_NOTION_D" ],
    },
    COUPLE_F : {
        id           : "COUPLE_F",
        label        : "彌勒世尊．燃燈",
        // img          : "img/Special/15/f3.png",
        color        : "f",
        type         : "GOD",
        health       : 3102,
        attack       : 1604,
        recovery     : 376,
        wake         : [ "H_A_R_INCREASE", "STRAIGHT_ENCIRCLEMENT", "H_A_R_INCREASE", "STRAIGHT_ENCHANTMENT" ],
        wake_var     : [ [0,90,0], 'h', [340,0,0], 'h' ],
        wake_info    : [ "攻擊力+90", "直排靈氣圍城", "生命力+340", "直排心強化" ],
        leader       : "COUPLE_F",
        active       : [ "DEFENSIVE_STANCE_EX_F" ],
    },
    COUPLE_P : {
        id           : "COUPLE_P",
        label        : "顯聖真君．楊戩",
        // img          : "img/Special/15/p3.png",
        color        : "p",
        type         : "HUMAN",
        health       : 3132,
        attack       : 1372,
        recovery     : 384,
        wake         : [ "H_A_R_INCREASE", "ACTIVE_COOLDOWN_BEGINING", "H_A_R_INCREASE", "STRAIGHT_ATTACK" ],
        wake_var     : [ [0,0,50], 2, [0,120,0], [1.1,4] ],
        wake_info    : [ "回復力+50", "進關後冷卻回合-2", "攻擊力+120", "4顆直排劍10%" ],
        leader       : "COUPLE_P",
        active       : [ "BATTLEFIELD_P" ],
    },
    BABYLON_W : {
        id           : "BABYLON_W",
        label        : "智慧者．阿特拉哈西斯",
        // img          : "img/Special/23/w2.png",
        color        : "w",
        type         : "GOD",
        health       : 3011,
        attack       : 1399,
        recovery     : 421,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "BABYLON_W",
        active       : [ "BLADES_OF_WATER" ],
    },
    BABYLON_F : {
        id           : "BABYLON_F",
        label        : "暴風軍神．尼努爾塔",
        // img          : "img/Special/23/f2.png",
        color        : "f",
        type         : "GOD",
        health       : 3167,
        attack       : 1496,
        recovery     : 375,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "BABYLON_F",
        active       : [ "BLADES_OF_FLAME" ],
    },
    BABYLON_P : {
        id           : "BABYLON_P",
        label        : "牧者國王．杜穆濟",
        // img          : "img/Special/23/p2.png",
        color        : "p",
        type         : "GOD",
        health       : 3481,
        attack       : 1288,
        recovery     : 394,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "BABYLON_P",
        active       : [ "BLADES_OF_VINE" ],
    },
    BABYLON_L : {
        id           : "BABYLON_L",
        label        : "月神．伊南娜",
        // img          : "img/Special/23/l2.png",
        color        : "l",
        type         : "GOD",
        health       : 3136,
        attack       : 1302,
        recovery     : 433,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "BABYLON_L",
        active       : [ "BLADES_OF_LIGHT" ],
    },
    BABYLON_D : {
        id           : "BABYLON_D",
        label        : "惡疾之神．納姆塔爾",
        // img          : "img/Special/23/d2.png",
        color        : "d",
        type         : "GOD",
        health       : 2948,
        attack       : 1537,
        recovery     : 390,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "BABYLON_D",
        active       : [ "BLADES_OF_PHANTOM" ],
    },
    OLD_GREEK_W : {
        id           : "OLD_GREEK_W",
        label        : "浪濤海神．蓬托斯",
        // img          : "img/Special/36/w2.png",
        color        : "w",
        type         : "GOD",
        health       : 2769,
        attack       : 1486,
        recovery     : 433,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "BOUNDARY_REVOLUTION",
        active       : [ "FLORAL_CORNER_W" ],
    },
    OLD_GREEK_D : {
        id           : "OLD_GREEK_D",
        label        : "暗影夜神．厄瑞玻斯",
        // img          : "img/Special/36/d2.png",
        color        : "d",
        type         : "GOD",
        health       : 2775,
        attack       : 1653,
        recovery     : 330,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "BOUNDARY_REVOLUTION",
        active       : [ "FLORAL_CORNER_D" ],
    },
    FALLEN_HALO_F : {
        id           : "FALLEN_HALO_F",
        label        : "變臉火術．切西亞",
        // img          : "img/Special/40/f2.png",
        color        : "f",
        type         : "GOD",
        health       : 3209,
        attack       : 1651,
        recovery     : 314,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    FALLEN_HALO_D : {
        id           : "FALLEN_HALO_D",
        label        : "放任孽魔．撒旦",
        // img          : "img/Special/40/d2.png",
        color        : "d",
        type         : "DEVIL",
        health       : 2231,
        attack       : 2407,
        recovery     : 305,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    IMPERIAL_WARLORD_W : {
        id           : "IMPERIAL_WARLORD_W",
        label        : "青龍偃月．關羽",
        // img          : "img/Special/41/w2-1.png",
        color        : "w",
        type         : "HUMAN",
        health       : 2825,
        attack       : 1538,
        recovery     : 558,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    TABLE_KNIGHT_L : {
        id           : "TABLE_KNIGHT_L",
        label        : "高潔騎士．亞瑟",
        // img          : "img/Special/44/l2-1.png",
        color        : "l",
        type         : "HUMAN",
        health       : 3022,
        attack       : 1485,
        recovery     : 547,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    DARK_GOLD_MAYA : {
        id           : "DARK_GOLD_MAYA",
        label        : "創曆者．馬雅",
        // img          : "img/Special/48/l1.png",
        color        : "l",
        type         : "GOD",
        health       : 1,
        attack       : 1,
        recovery     : 1,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    STAR_BURST_OPHIUCHUS : {
        id           : "STAR_BURST_OPHIUCHUS",
        label        : "宿命扭轉．蛇夫座斯克勒",
        // img          : "img/Special/47/p2-1.png",
        color        : "p",
        type         : "GOD",
        health       : 3575,
        attack       : 1675,
        recovery     : 334,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    FAIRY_SAKURA : {
        id           : "FAIRY_SAKURA",
        label        : "閉鎖心蕾．櫻",
        // img          : "img/Special/50/f2-1.png",
        color        : "f",
        type         : "FAIRY",
        health       : 2188,
        attack       : 1403,
        recovery     : 789,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "RAIN_OF_SAKURA",
        active       : [ "NONE" ],
    },
    FAIRY_ROZEN : {
        id           : "FAIRY_ROZEN",
        label        : "戀慕瀰漫．薔薇",
        // img          : "img/Special/50/d2-1.png",
        color        : "d",
        type         : "FAIRY",
        health       : 1992,
        attack       : 1446,
        recovery     : 823,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    UNIVERSE_DAOLOTH : {
        id           : "UNIVERSE_DAOLOTH",
        label        : "悖論創造．道羅斯",
        // img          : "img/Special/51/l2-1.png",
        color        : "l",
        type         : "DRAGON",
        health       : 4401,
        attack       : 1520,
        recovery     : 125,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "NONE",
        active       : [ "NONE" ],
    },
    UNIVERSE_AZATHOTH : {
        id           : "UNIVERSE_AZATHOTH",
        label        : "因果破壞．阿撒托斯",
        // img          : "img/Special/51/d2-1.png",
        color        : "d",
        type         : "DRAGON",
        health       : 4415,
        attack       : 1614,
        recovery     : 115,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "無", "無", "無", "無" ],
        leader       : "VIOLENCE_OF_DARK_DRAGONS",
        active       : [ "NONE" ],
    },
    IMPERIAL_WARLORD2_W : {
        id           : "IMPERIAL_WARLORD2_W",
        label        : "耿直理想家．孫策",
        // img          : "img/Special/52/w2-1.png",
        color        : "w",
        type         : "HUMAN",
        health       : 2852,
        attack       : 1524,
        recovery     : 556,
        wake         : [ "NONE", "NONE", "NONE", "NONE" ],
        wake_var     : [ 0, 0, 0, 0 ],
        wake_info    : [ "", "", "", "" ],
        leader       : "GREATNESS_OF_WARLORD",
        active       : [ "NONE" ],
    },
// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
};

//==============================================================
// Color Letter Mapping
//==============================================================

var COLOR_LETTERS = [
    { 'w': '水', 'f': '火', 'p': '木', 'l': '光', 'd': '暗', 'h': '心', '_': '無' },
    { 'w': '浪濤', 'f': '熾燄', 'p': '藤木', 'l': '流螢', 'd': '幽冥', 'h': '心', '_': '無' },
    { 'w': '水', 'f': '焰', 'p': '森', 'l': '光', 'd': '魅', 'h': '心', '_': '無' },
    { 'w': '浪濤', 'f': '熾燄', 'p': '藤木', 'l': '玄光', 'd': '幽冥', 'h': '護心', '_': '無' },
    { 'w': '海', 'f': '炎', 'p': '森', 'l': '聖', 'd': '邪', 'h': '心', '_': '無' },
    { 'w': '波濤', 'f': '火烈', 'p': '枯朽', 'l': '天雷', 'd': '背叛', 'h': '心', '_': '無'},
    { 'w': '漩渦', 'f': '焰芒', 'p': '呼嘯', 'l': '聖焰', 'd': '吞噬', 'h': '心', '_': '無'},
];

var COLOR_EXCLUSIVE = {
    'w': 'f', 'f': 'p', 'p': 'w', 'l': 'd', 'd': 'l', 'h': 'w', '_': 'w'
};
var COLOR_ANTI_EXCLUSIVE = {
    'w': 'p', 'f': 'w', 'p': 'f', 'l': 'd', 'd': 'l', 'h': 'w', '_': 'w'
};

//==============================================================
// Attack Recover 
//==============================================================

var BASIC_ATTACK = {
    base   : 0,
    color  : "_",
    damage : 0,
    factor : 0,
    goal   : "single",
    place  : -1,
    strong : false,
    style  : "NONE",
    type   : "NONE",
    target : [],
    log    : "",
    work   : "init",
};
var BASIC_RECOVER = {
    base   : 0,
    color  : "_",
    factor : 0,
    place  : -1,
    style  : "NONE",
    type   : "NONE",
    log    : "",
    work   : "init",
};
var BASIC_INJURE = {
    enemy  : 0,
    label  : "",
    damage : 0,
    color  : "_",
    work   : "init",
};

function makeNewAttack(){
    var attack = $.extend(true, {}, BASIC_ATTACK);
    return attack;
}
function makeNewRecover(){    
    var recover = $.extend(true, {}, BASIC_RECOVER);
    return recover;
}
function makeNewInjure(){    
    var injure = $.extend(true, {}, BASIC_INJURE);
    return injure;
}